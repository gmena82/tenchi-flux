let n=[],i=0;const o=4;let c=r=>{let t=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(l){return e.lc=t.push(l),()=>{for(let s=i+o;s<n.length;)n[s]===l?n.splice(s,o):s+=o;let u=t.indexOf(l);~u&&(t.splice(u,1),--e.lc)}},notify(l,u){let s=!n.length;for(let f of t)n.push(f,e.value,l,u);if(s){for(i=0;i<n.length;i+=o)n[i](n[i+1],n[i+2],n[i+3]);n.length=0}},off(){},set(l){let u=e.value;u!==l&&(e.value=l,e.notify(u))},subscribe(l){let u=e.listen(l);return l(e.value),u},value:r};return e},p=(r={})=>{let t=c(r);return t.setKey=function(e,l){let u=t.value;typeof l>"u"&&e in t.value?(t.value={...t.value},delete t.value[e],t.notify(u,e)):t.value[e]!==l&&(t.value={...t.value,[e]:l},t.notify(u,e))},t};const a=p({});function v(r,t){const e=a.get();a.set({...e,[r]:{isMuted:t,lastInteraction:Date.now()}})}function d(r,t){return a.subscribe(e=>{t(e[r])})}export{d as a,v as s};
